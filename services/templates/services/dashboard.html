{% extends "base.html" %}

{% block content %}
<div class="container py-5">
    <h1 class="text-center mb-4">Dashboard</h1>

    <div class="row mb-4">
        <div class="col">
            <h2>Services</h2>
            <ul class="list-group">
                {% for service in services %}
                    <li class="list-group-item">
                        {{ service.title }} - ZMW {{ service.price }}
                        <span class="text-muted">{{ service.description|truncatewords:10 }}</span>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <h2>Appointments</h2>
            <ul class="list-group">
                {% for appointment in appointments %}
                    <li class="list-group-item">
                        {{ appointment.client.username }} - {{ appointment.service.title }} <br>
                        Date: {{ appointment.appointment_date|date:"d M Y H:i" }}<br>
                        <span class="badge bg-primary">{{ appointment.reserved|yesno:"Reserved,Available" }}</span>
                        <span class="badge bg-success">{{ appointment.completed|yesno:"Completed,Pending" }}</span>
                    </li>
                {% endfor %}
            </ul>
        </div>
        <div class="col-md-6">
            <h2>Payments</h2>
            <ul class="list-group">
                {% for payment in payments %}
                    <li class="list-group-item">
                        {{ payment.appointment }}<br>
                        Amount: ZMW {{ payment.amount }} - {{ payment.timestamp|date:"d M Y H:i" }}<br>
                        <span class="badge bg-info">{{ payment.is_reservation|yesno:"Reservation,Final" }}</span>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col">
            <h2>Reminders</h2>
            <ul class="list-group">
                {% for reminder in reminders %}
                    <li class="list-group-item">
                        Reminder for {{ reminder.appointment }} on {{ reminder.reminder_date|date:"d M Y H:i" }}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}
